ifdef::env-github[]
****
link:https://www.elastic.co/guide/en/cloud-on-k8s/master/k8s-operator-config.html[View this document on the Elastic website]
****
endif::[]
[id="{p}-operator-config"]
== Configuring ECK

ECK can be configured using either command line flags or environment variables.


[width="70%",valign="middle",halign="center",cols="m,m,m,d",options="header"]
|===
|Flag |Env Var|Default|Description
|auto-port-forward |AUTO_PORT_FORWARD |false |Enables automatic port forwarding to allow running the operator outside the cluster. For dev use only as it exposes k8s resources on ephemeral ports to localhost.
|ca-cert-rotate-before |CA_CERT_ROTATE_BEFORE |24h |Duration representing how long before expiration CA certificates should be re-issued.
|ca-cert-validity |CA_CERT_VALIDITY |8760h |Duration representing the validity period of a generated CA certificate.
|cert-rotate-before |CERT_ROTATE_BEFORE |24h |Duration representing how long before expiration TLS certificates should be re-issued.
|cert-validity |CERT_VALIDITY |8760h |Duration representing the validity period of a generated TLS certificate.
|debug-http-listen |DEBUG_HTTP_LISTEN |localhost:6060 |Listen address for the debug HTTP server. Only available in development mode.
|development | |false |Enable developmenet mode. Only available as a CLI flag.
|enable-debug-logs |ENABLE_DEBUG_LOGS |false |Enables debug logs. Equivalent to `log-verbosity=1`.
|log-verbosity |LOG_VERBOSITY |0 |Verbosity level of logs. `-2`=Error, `-1`=Warn, `0`=Info, `0` and above=Debug
|manage-webhook-certs |MANAGE_WEBHOOK_CERTS |true |Enables automatic webhook certificate management.
|metrics-port |METRICS_PORT |0 |Prometheus metrics port. Set to 0 to disable the metrics endpoint.
|namespaces |NAMESPACES | |Namespaces in which this operator should manage resources. Accepts multiple comma-separated values. Defaults to all namespaces if empty or unspecified.
|operator-namespace |OPERATOR_NAMESPACE | |Namespace the operator runs in. Required.
|operator-roles |OPERATOR_ROLES |all |Roles this operator should assume. Valid values are `namespace`, `global`, `webhook` or `all`. Accepts multiple comma separated values.
|webhook-pods-label |WEBHOOK_PODS_LABEL | |Label used to select pods running the webhook server.
|webhook-secret |WEBHOOK_SECRET | | Kubernetes secret containing the webhook certificates.
|===

Duration values should be specified as numeric values suffixed by the time unit. For example, a duration of 10 hours should be specified as `10h`. Acceptable time unit suffixes are:

[cols="m,d",options="header"]
|===
|Suffix |Unit
|ms | Milliseconds
|s  | Seconds
|m  | Minutes
|h  | Hours
|===


Edit the operator deployment to change any of the flag values. For example, to enable `DEBUG` level logs, the operator needs to be restarted with the `--enable-debug-logs` flag set to `true`. This can be done as follows:


Edit the operator Statefulset:

[source,sh]
----
kubectl edit statefulset.apps -n elastic-system elastic-operator
----

change the `args` array:

[source,yaml]
----
  spec:
    containers:
    - args:
      - manager
      - --operator-roles
      - all
      - --enable-debug-logs=true
----

include::webhook.asciidoc[]
